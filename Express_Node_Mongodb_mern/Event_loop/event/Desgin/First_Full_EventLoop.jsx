┌─────────────────────────────────────────────────────────────┐
│                     NODE.JS EVENT LOOP                      │
│                     (libuv - Single Thread)                 │
└─────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────┐
│ 1) TIMERS PHASE                                              │
│-------------------------------------------------------------│
│ Executes callbacks scheduled by:                             │
│   • setTimeout()                                             │
│   • setInterval()                                            │
│                                                             │
│ Example:                                                     │
│   setTimeout(cb, 0)                                          │
└─────────────────────────────────────────────────────────────┘
                │
                ▼
┌─────────────────────────────────────────────────────────────┐
│ 2) PENDING CALLBACKS PHASE                                   │
│-------------------------------------------------------------│
│ Executes system callbacks deferred from previous cycle       │
│ (TCP errors, some OS callbacks)                              │
└─────────────────────────────────────────────────────────────┘
                │
                ▼
┌─────────────────────────────────────────────────────────────┐
│ 3) IDLE / PREPARE PHASE                                      │
│-------------------------------------------------------------│
│ Internal use only (libuv)                                    │
│ Not accessible from JS                                      │
└─────────────────────────────────────────────────────────────┘
                │
                ▼
┌─────────────────────────────────────────────────────────────┐
│ 4) POLL PHASE                                                │
│-------------------------------------------------------------│
│ • Executes I/O callbacks                                     │
│   (fs.readFile, net, http, etc.)                             │
│                                                             │
│ • If poll queue is empty:                                    │
│   - Waits for I/O                                            │
│   - Or moves to CHECK phase                                  │
└─────────────────────────────────────────────────────────────┘
                │
                ▼
┌─────────────────────────────────────────────────────────────┐
│ 5) CHECK PHASE                                               │
│-------------------------------------------------------------│
│ Executes callbacks scheduled by:                             │
│   • setImmediate()                                           │
└─────────────────────────────────────────────────────────────┘
                │
                ▼
┌─────────────────────────────────────────────────────────────┐
│ 6) CLOSE CALLBACKS PHASE                                     │
│-------------------------------------------------------------│
│ Executes close events:                                       │
│   • socket.on('close')                                       │
│   • server.close()                                           │
└─────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────┐
│                 MICROTASK QUEUES (HIGH PRIORITY)             │
│-------------------------------------------------------------│
│ Runs AFTER EACH PHASE and BEFORE NEXT PHASE                  │
│                                                             │
│ 1) process.nextTick()   (HIGHEST PRIORITY)                   │
│ 2) Promise.then / async-await                                │
└─────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────┐
│                    THREAD POOL (libuv)                       │
│-------------------------------------------------------------│
│ Offloaded blocking operations:                               │
│   • fs.readFile                                              │
│   • crypto                                                  │
│   • dns.lookup                                              │
│                                                             │
│ Completion → queued into POLL phase                          │
└─────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────┐
│                     CALL STACK (JS)                          │
│-------------------------------------------------------------│
│ Executes JavaScript code                                     │
│ Only ONE stack (single-threaded)                             │
└─────────────────────────────────────────────────────────────┘
